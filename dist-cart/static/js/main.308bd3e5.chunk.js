(this["webpackJsonphokx-cart-demo"]=this["webpackJsonphokx-cart-demo"]||[]).push([[0],{153:function(t,e,c){},235:function(t,e,c){},236:function(t,e,c){},237:function(t,e,c){},256:function(t,e,c){"use strict";c.r(e);var r=c(0),n=c(27),a=c.n(n),o=c(36),u=c(64),d=c(57),i=c(258),s=c(263),j=c(260),l=(c(153),c(33)),h=c(8);function b(t){return[{title:"\u5546\u54c1",dataIndex:"name",key:"name"},{title:"\u4ef7\u683c",dataIndex:"price",key:"price"},{title:"\u6570\u91cf",dataIndex:"count",key:"count"},{title:"\u64cd\u4f5c",key:"action",render:function(e){return Object(h.jsx)(d.a,{size:"small",onClick:function(){return t(e.key)},children:"\u5220\u9664"})}}]}var f=function(t){var e=Object(l.useStore)("cart"),c=e.state,r=e.dispatch,n=Object(l.useGetter)("cart");return Object(h.jsxs)("div",{children:[Object(h.jsx)(i.a,{columns:b((function(t){return r({type:"deleteFromCart",prodId:t})})),dataSource:c.cartProducts,size:"small"}),Object(h.jsxs)("p",{children:["\u5171 ",n.totalCount," \u4ef6\u5546\u54c1\uff0c\u5171$",n.totalPrice]}),Object(h.jsx)(d.a,{type:"primary",size:"small",danger:!0,children:Object(h.jsx)(u.b,{to:"/cart",children:"\u53bb\u8d2d\u7269\u8f66"})})]})},p=function(t){var e=Object(l.useGetter)("cart");return Object(h.jsx)("div",{className:"popCart",children:Object(h.jsx)(s.a,{content:f,title:"\u8d2d\u7269\u8f66",children:Object(h.jsx)(j.a,{count:e.totalCount,children:Object(h.jsx)(d.a,{type:"primary",children:"\u6211\u7684\u8d2d\u7269\u8f66"})})})})},O=c(22),x=(c(235),c(262)),k=c(261);function y(t){return[{title:"\u5546\u54c1",dataIndex:"name",key:"name",render:function(t){return Object(h.jsx)(x.a,{color:"geekblue",children:t})}},{title:"\u4ef7\u683c",dataIndex:"price",key:"price"},{title:"\u64cd\u4f5c",key:"action",render:function(e){return Object(h.jsx)(d.a,{onClick:function(){return t(e)},children:"\u52a0\u5165\u8d2d\u7269\u8f66"})}}]}var m=function(t){var e=Object(l.useStore)("products"),c=e.state,n=e.dispatch,a=Object(l.useStore)("cart"),o=(a.state,a.dispatch);Object(r.useEffect)((function(){return n({type:"getData"})}),[]);return Object(h.jsxs)("div",{className:"products",children:[Object(h.jsxs)(k.a,{children:[Object(h.jsx)(k.a.Item,{children:"\u9996\u9875"}),Object(h.jsx)(k.a.Item,{children:"\u5546\u54c1\u5217\u8868"})]}),Object(h.jsx)("br",{}),Object(h.jsx)(i.a,{columns:y((function(t){o({type:"addToCart",data:t})})),dataSource:c.products})]})},P=c(259);c(236);function v(t,e){return[{title:"\u5546\u54c1",dataIndex:"name",key:"key",render:function(t){return Object(h.jsx)(x.a,{color:"geekblue",children:t})}},{title:"\u5355\u4ef7",dataIndex:"price",key:"key"},{title:"\u6570\u91cf",dataIndex:"count",key:"key",render:function(e,c){return Object(h.jsx)(P.a,{defaultValue:e,min:1,onChange:function(e){return t(c.key,e)}})}},{title:"\u5c0f\u8ba1",dataIndex:"totalPrice",key:"key"},{title:"\u64cd\u4f5c",key:"action",render:function(t){return Object(h.jsx)(d.a,{onClick:function(){return e(t.key)},children:"\u5220\u9664"})}}]}function C(t,e){return{type:"checkbox",selectedRowKeys:t,onSelect:function(t,c){e({type:"updateProductChecked",prodId:t.key,checked:c})},onSelectAll:function(t){e({type:"updateAllProductChecked",checked:t})}}}var I=function(t){var e=Object(l.useStore)("cart"),c=e.state,r=e.dispatch,n=Object(l.useGetter)("cart");return Object(h.jsxs)("div",{className:"cart",children:[Object(h.jsxs)(k.a,{children:[Object(h.jsx)(k.a.Item,{children:Object(h.jsx)(u.b,{to:"/",children:"\u9996\u9875"})}),Object(h.jsx)(k.a.Item,{children:"\u8d2d\u7269\u8f66"})]}),Object(h.jsx)("br",{}),Object(h.jsx)(i.a,{rowSelection:C(n.selectedProds,r),columns:v((function(t,e){r({type:"updateProductCount",prodId:t,count:e})}),(function(t){return r({type:"deleteFromCart",prodId:t})})),dataSource:c.cartProducts}),Object(h.jsxs)("p",{children:["\u5df2\u9009 ",n.checkedCount," \u4ef6\u5546\u54c1\uff0c\u603b\u4ef7\uff1a",n.checkedPrice]}),Object(h.jsx)(d.a,{type:"primary",danger:!0,children:"\u7ed3\u7b97"})]})};var g=function(t){return Object(h.jsx)("div",{id:"app",children:Object(h.jsxs)(u.a,{children:[Object(h.jsxs)("div",{children:[Object(h.jsxs)("span",{className:"title",children:[Object(h.jsx)("strong",{children:"Hokx"})," - \u8d2d\u7269\u8f66\u793a\u4f8b"]}),Object(h.jsx)("a",{className:"github",href:"https://github.com/koi-w/hokx-cart-demo",children:Object(h.jsx)("svg",{height:"22",viewBox:"0 0 16 16",version:"1.1",width:"32","aria-hidden":"true",children:Object(h.jsx)("path",{fillRule:"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})})}),Object(h.jsx)(p,{})]}),Object(h.jsx)(O.a,{path:"/",component:m,exact:!0}),Object(h.jsx)(O.a,{path:"/cart",render:function(t){return Object(h.jsx)(I,Object(o.a)({},t))},exact:!0})]})})};c(237),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var w=c(109),S=c.n(w),N=c(142),z=c(143),A=c.n(z),E={nameSpace:"products",state:{products:[]},reducer:{setProducts:function(t,e){return t.products=e.data,Object(o.a)({},t)}},effects:{getData:function(t,e){return Object(N.a)(S.a.mark((function e(){var c,r,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,c=t.put,e.next=3,A()({method:"GET",url:"/products.json"});case 3:r=e.sent,n=r.data,c({type:"setProducts",data:n});case 6:case"end":return e.stop()}}),e)})))()}}},G=c(110),B=[E,{nameSpace:"cart",localStorage:!0,state:{cartProducts:[]},getter:{totalCount:function(t){return t.cartProducts.reduce((function(t,e){return t+e.count}),0)},totalPrice:function(t){return t.cartProducts.reduce((function(t,e){return t+e.totalPrice}),0)},selectedProds:function(t){return t.cartProducts.reduce((function(t,e){return e.isChecked&&t.push(e.key),t}),[])},checkedCount:function(t){return t.cartProducts.reduce((function(t,e){return e.isChecked&&(t+=e.count),t}),0)},checkedPrice:function(t){return t.cartProducts.reduce((function(t,e){return e.isChecked&&(t+=e.totalPrice),t}),0)}},reducer:{addToCart:function(t,e){var c=e.data,r=t.cartProducts.find((function(t){return t.key===c.key}));return r?(r.count++,r.isChecked=!0,r.totalPrice=r.count*r.price):t.cartProducts.push(Object(o.a)(Object(o.a)({},c),{},{count:1,isChecked:!0,totalPrice:c.price})),t.cartProducts=Object(G.a)(t.cartProducts),Object(o.a)({},t)},deleteFromCart:function(t,e){var c=t.cartProducts.findIndex((function(t){return t.key===e.prodId}));return-1!==c&&t.cartProducts.splice(c,1),t.cartProducts=Object(G.a)(t.cartProducts),Object(o.a)({},t)},updateProductCount:function(t,e){var c=t.cartProducts.find((function(t){return t.key===e.prodId}));return c&&(c.count=e.count,c.totalPrice=e.count*c.price),Object(o.a)({},t)},updateAllProductChecked:function(t,e){return t.cartProducts.forEach((function(t){t.isChecked=e.checked})),Object(o.a)({},t)},updateProductChecked:function(t,e){var c=t.cartProducts.find((function(t){return t.key===e.prodId}));return c&&(c.isChecked=e.checked),Object(o.a)({},t)}},effects:{}}],F=Object(l.createStore)(B);a.a.render(Object(h.jsx)(F,{children:Object(h.jsx)(g,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[256,1,2]]]);
//# sourceMappingURL=main.308bd3e5.chunk.js.map